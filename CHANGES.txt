What's new
**********

This is a summary of changes, for a detailed list of all the changes see ` the github commits changelog <https://github.com/hyperspy/hyperspy/commits/master>`_.

.. _changes_0.4.1:

v0.4.1
======

Enhancements
------------

 * Added TIFF 16, 32 and 64 bits support by using (and distributing) Christoph Gohlke's `tifffile library <http://www.lfd.uci.edu/~gohlke/code/tifffile.py.html>`_.
 * Improved UTF8 support.
 * Reduce the number of required libraries by making mdp and hdf5 not mandatory.
 * Improve the information returned by __repr__ of several objects.
 * DictionaryBrowser now has an export method, i.e. mapped parameters and original_parameters can be exported.
 * New _id_name attribute for Components and Parameters. Improvements in their __repr__ methods
 * Component.name can now be overwriten by the user.
 * New Signal.__str__ method
 * Include Hyperspy in The Python Package Index.


Bugs fixed
----------
 * Non-ascii characters breaking IO and print features fixed.
 * Loading of multiple files at once using wildcards fixed.
 * Remove broken hyperspy-gui script
 * Remove unmantained and broken 2D peak finding and analysis features

Syntax changes
--------------
 * In EELS automatic background feature creates a PowerLaw component, adds it to the model an add it to a variable in the user namespace. The variable has been renamed from `bg` to `background`-
 * pes_gaussian Component renamed to pes_core_line_shape
 
.. _changes_0.4:
 
v0.4
====

Enhancements
------------
 * Add a slider to the filter ui.
 * Add auto_replot to sum.
 * Add butterworth filter.
 * Added centring and auto_transpose to the svd_pca algorithm.
 * Keep the mva_results information when changing the signal type.
 * Added sparse_pca and mini_batch_sparse_pca to decomposition algorithms.
 * Added TV to the smoothing algorithms available in BSS.
 * Added whitening to the mdp ICA preprocessing.
 * Add explained_variance_ratio.
 * Improvements in saving/loading mva data.
 * Add option to perform ICA on the scores.
 * Add orthomax FA algorithm.
 * Add plot methods to Component and Parameter.
 * Add plot_results to Model.
 * Add possibility to export the decomposition and bss results to a folder.
 * Add Signal method `change_dtype`.
 * Add the possibility to pass extra parameters to the ICA algorithm.
 * Add the possibility to reproject the data after a decomposition.
 * Add warning when decomposing a non-float signal.
 * adds a method to get the PCs as a Spectrum object and adds smoothing to the ICA preprocessing
 * Add the possibility to select the energy range in which to perform spike removal operations
 * the smoothings guis now offer differentiation and line color option. Smoothing now does not require a gui
 * Fix reverse_ic which was not reversing the scores and improve the autoreversing method
 * Avoid cropping when is not needed
 * Changed criteria to reverse the ICs
 * Changed nonans default to False for plotting
 * Change the whitening algorithm to a svd based one and add sklearn fastica algorithm
 * Clean the ummixing info after a new decomposition
 * Increase the chances that similar independent components will have the same indexes
 * Make savitzky-golay smoothing work without raising figures
 * Make plot_decomposition* plot only the number of factors/scores determined by output_dimension
 * make the Parameter __repr__ method print its name
 * New contrast adjustment tool
 * New export method for Model, Component and Parameter
 * New Model method: print_current_values
 * New signal, spectrum_simulation
 * New smoothing algorithm: total variance denoising
 * Plotting the components in the same or separate windows is now configurable in the preferences
 * Plotting the spikes is now optional
 * Return an error message when the decomposition algorithm is not recognised
 * Store the masks in mva_results
 * The free parameters are now automically updated on chaning the free attribute
 
Bugs fixed
----------
 * Added missing keywords to plot_pca_factors and plot_ica_factors.
 * renamed incorrectly named exportPca and exportIca functions
 * an error was raised when calling generate_data_from_model
 * a signal with containing nans was failing to plot
 * attempting to use any decomposition plotting method after loading with mva_results.load was raising an error
 * a typo was causing in error in pca when normalize_variance = True
 * a typo was raising an error when cropping the decomposition dimension
 * commit 5ff3798105d6 made decomposition and other methods raise an error
 * BUG-FIXED: the decomposition centering index was wrong
 * ensure_directory was failing for the current directory
 * model data forced to be 3D unnecessarily
 * non declared variable was raising an error
 * plot naming for peak char factor plots were messed up.
 * plot_RGB was broken
 * plot_scores_2D was using the transpose of the shape to reshape the scores
 * remove background was raising an error when the navigation dimension was 0
 * saving the scores was sometimes transposing the shape
 * selecting indexes while using the learning export functions was raising an error
 * the calibrate ui was calculating wrongly the calibration the first time that Apply was pressed
 * the offset estimation was summing instead of averaging
 * the plot_explained_variance_ratio was actually plotting the cumulative, renamed
 * the signal mask in decomposition and ica was not being raveled
 * the slice attribute was not correctly set at init in some scenarios
 * the smoothing and calibrabrion UIs were freezing when the plots where closed before closing the UI window
 * to_spectrum was transposing the navigation dimension
 * variance2one was operating in the wrong axis
 * when closing the plots of a model, the UI object was not being destroyed
 * when plotting an image the title was not displayed
 * when the axis size was changed (e.g. after cropping) the set_signal_dimension method was not being called
 * when using transform the data was being centered and the resulting scores were wrong

Syntax changes
--------------

 * in decomposition V rename to explained_variance
 * In FixedPattern, default interpolation changed to linear
 * Line and parabole components deleted + improvements in the docstrings
 * pca_V = variance
 * mva_result renamed to learning_results
 * pca renamed to decomposition
 * pca_v and mva_results.v renamed to scores pc renamed to factors pca_build_SI renamed to get_pca_model ica_build_SI renamed to get_ica_model
 * plot_explained_variance renamed to plot_explained_variance_ratio
 * principal_components_analysis renamed to decomposition
 * rename eels_simulation to eels_spectrum_simulation
 * Rename the output parameter of svd_pca and add scores
 * Replace plot_lev by plot_explained_variance_ratio
 * Scores renamed to loadings
 * slice_bool renamed to navigate to make its function more explicit
 * smoothing renamed to pretreatment and butter added
 * variance2one renamed to normalize_variance
 * w renamed to unmixing matrix and fixes a bug when loading a mva_result in which output_dimension = None

.. _changes_0.3.0b2.1:

v0.3.0b2.1
==========

 * BUG-FIX: hyperspy was not starting with Ipython < 0.11

.. _changes_0.3.0b2:

v0.3.0b2
========

Enhancements
------------
 * Added correlation_factor estimation to estimate_variance_parameters
 * Add plot_results option to estimage_variance
 * By default hdf5 compresses the files. It can be disabled passing compression = None when saving
 * Default plot_pca_scores cmap changed to grey
 * the estimate_gain function now stores the estimation in mapped parameters, where it can be used by estimate_variance 
 * Major changes to export_PCA_results and export_ICA_results and new "Machine Learning" preferences section to change the default value of some parameters related to machine learning.
 * Remove the "nothing done" message that appeared when unfolding a signal
 
Bugs fixed
----------
 * export_[PCA,ICA] was saving incorrectly the factors
 * ica_build_SI was not storing the residual
 * missing import was raising an error
 * the estimate_gain function was not refolding the signals
 * the ImportRPL dm3 plugin was not opening correctly certain RPL files

.. _changes_0.3.0b1:

v0.3.0b1
========

Major code rewriting. See `the github changelog <https://github.com/hyperspy/hyperspy/commits/master>`_ for details.
 
.. _changes_0.2.13:

v0.2.13 beta
============

Enhancements
------------

* The egerton quantification gui now supports signal integratal mapping when the background is not defined
* The keywords in the rpl file are now sorted
* Changes to the hyperspy specific ripple keyword names to make them less EELSish: the x-*,y-* and energy-* keys are now width-*, height-* and energy-*
* New method: 'interactive_browsing' for class DictBrowser
* DictBrowser returns a sorted list when using ls()

BUGS Fixed:
-----------
* When reading ripple files the depth-scale now superseds ev-per-channel
* hyperspy was overwriting the ipython script
* In win32 with no DM installed an error was raised when running hyperspy for the first time


.. _changes_0.2.12:

v0.2.12 beta
============

Enhancements
------------
* Writting support for the ripple format
* Spectrum method 'reverse_ic' can now reverse more than one IC at once

Bugs fixed
----------
* Fixed several bugs that were affecting the ripple io plugin reading features
* Fixed a bug in the new dm3 reader io plugin that was raising an error when loading RGB files
* Fixed a bug in the mrc reader plugin that was failing to load standard mrc files
* Various bug/compatibility fixes in MSA plugin

.. _changes_0.2.11a:

v0.2.11a 31/03/2011
===================

Enhancements
------------
* Added option to plot ICs in the same plot
* plot_datacube_sum(self, *axes) plots the sum of the datacube along the given axes

Bugs fixed
----------
* Hyperspy was not finding the DM path when a 32 bits DM was installed in a 64-bits Windows
* The new dm3reader was suffering from some bugs, the default reader is back to the old code until the issues are fixed

.. _changes_0.2.10:

v0.2.10 23/03/2011
==================

Enhancements
------------
* New image stack io plugin

BUGs fixed
----------
* A error was raised when trying to fit a model after closing a plot
* The (old) dm3 reader was messing up the coordinates
* The new dm3 reader is was failing to load some dm3 files 

.. _changes_0.2.9:

v0.2.9 18/03/2011
=================

Enhancements
------------
* Totally new code to read dm3s
* The bucker reader has been replaced by ripple

BUGs fixed
----------
* The plot_RGB function was broken

Enhancements
------------
* The second cursor feature is again available
* Enhancements to the documentation
* New progress bar
* The chronospim function from utils has been fixed
* Python lowess function
* A new gui based on traits (although it is not packaged ATM)
* New calibration and Egerton quantification gui functionalities
* The FEI's reader now supports images, even when the acquisition was aborted before completion.
* The TK and QT4 backends are now supported
* Added key navigation


.. _changes_0.2.8:

v0.2.8 13/03/2011
=================

Enhancements
------------
* The second cursor feature is again available
* Enhancements to the documentation
* New progress bar
* The chronospim function from utils has been fixed
* Python lowess function
* A new gui based on traits (although it is not packaged ATM)
* New calibration and Egerton quantification gui functionalities
* The FEI's reader now supports images, even when the acquisition was aborted before completion.
* The TK and QT4 backends are now supported
* Added key navigation

BUGs fixed
----------
* The fast powerlaw estimation was displaying a periodic behaviour
* When closing a visualisation the callback functions were not correctely cleaned
* After closing a model visualisation, a fitting attempt was raising an error

Known BUGS
----------

* The line spectrum navigator shows a 'ghost' second pointer after disabling it.


.. _changes_0.2.8b:

v0.2.8b 18/12/2010
==================

Enhancements
------------
*  The data exploration code was totally rewritten. Between the enhancements 
are automatic update after spectrum and model changes. However there are some 
regressions, e.g. the second cursor feature is not yet available
* New format supported for reading: Bucker raw.
* The autosaving of Model is now disable by default (what results in a big 
performance improve when fitting simple model)

BUGs fixes
----------
* m.fit was broken for grad = True and any fitter but leastsq and odr 


.. _changes_0.2.7:

v0.2.7, 01/12/2010
==================

Enhancements
------------
* Improvements in the visual data exploring features:

	- The cursors size can be changed
	- A coordinates change update the cursors and spectrum figure
	- Enabling and disabling the 'explorer' updates the spectrum figure
	- The maps colors defaults now to gray and the cursors are colorful.

* Improvements in the model class:

	- When saving the parameters to a file the std and asm arrays are saved too.
	- Prettier plotting
	- No need to manually call the touch or set_convolution_axis methods anymore
	- Much improved performance when the model is not convolved

Bugs fixed
----------
* The calculate_thickness method was broken
* The creation of the configuration folder was broken

.. _changes_0.2.6:

v0.2.6, 19/11/2010
==================

* Added imported_parameters attribute to the Spectrum object for FEI's and DMs data format
* FEI's reader now handles properly the SIs with reversed dimensions
* Fixed the get_configuration_directory_path() that was not working

.. _changes_0.2.5:

v0.2.5, 18/11/2010
==================

* Several bugs fixed (many thanks to the reporters). Probably the most annoying one was the failure to write to the user namespace after upgrading ipython. Now the name of the subshells are again availabe in the interactive session
* Several changes to the interface.
* The documentation was updated to reflex the last changes
* The microscopes.csv file was updated so it no longer contains the Orsay VG parameters.


.. _changes_0.2.4:

v0.2.4, 03/11/2010
==================

* Added Spectrum.save_principal_components method
* The poissonian noise normalization uses a masks to avoid errors with rows or columns that are always zero
* The dm3 reader was improved and should now read most of the data types.
* The load function got a new option, data_type, that can be used to force the file to be read as a spectrum or image instead of using the autodetection (default)
* In windows it is now possible (as it always has been in linux) to start hyperspy by simply typing hyperspy in the command prompt
* Several bugs fixed

.. _changes_0.2.3b:

v0.2.3b, 31/10/2010 -- Initial public release.
==============================================
